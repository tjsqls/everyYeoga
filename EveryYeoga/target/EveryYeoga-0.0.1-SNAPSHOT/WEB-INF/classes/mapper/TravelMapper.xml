<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="everyYeoga.store.mapper.TravelMapper">

	<resultMap id="TravelPlanMap" type="TravelPlan">

		<id column="travelPlanId" property="travelPlanId" />

		<result column="speakingAbility" property="speakingAbility" />

		<result column="travelArea" property="travelArea" />

		<result column="numberOfVisits" property="numberOfVisits" />

		<result column="theme" property="theme" />

		<result column="numberOfTraveler" property="numberOfTraveler" />

		<result column="preferGuide" property="preferGuide" />

		<result column="selfIntroduction" property="selfIntroduction" />

		<result column="gatheringStatus" property="gatheringStatus" />

		<association column="travelerId" property="traveler"
			jdbcType="VARCHAR" javaType="User"
			select="everyYeoga.store.mapper.UserMapper.retrieveByUserId" />

	</resultMap>

	<insert id="createTravelPlan" parameterType="travelPlan"> INSERT INTO
		travelPlan_tb(travelPlanId, travelerId, speakingAbility, travelArea,
		numberOfVisits, theme, numberOfTraveler, preferGuide,
		selfIntroduction, gatheringStatus) VALUES(travelPlan_seq.NEXTVAL,
		#{traveler.id}, #{speakingAbility}, #{travelArea}, #{numberOfVisits},
		#{theme}, #{numberOfTraveler}, #{preferGuide}, #{selfIntroduction},
		#{gatheringStatus}) </insert>

	<select id="retrieveTravelPlanByTravelArea" parameterType="String"
		resultType="travelPlan"> SELECT travelPlanId, travelerId, speakingAbility,
		travelArea, numberOfVisits, theme, numberOfTraveler, preferGuide,
		selfIntroduction, gatheringStatus, startDate,endDate FROM
		travelPlan_tb WHERE travelArea=#{travelArea} </select>

	<select id="retrieveTravelPlanByTravelAreaAndStartDate"
		parameterType="map" resultType="TravelPlan"> SELECT travelPlanId, travelerId,
		speakingAbility, travelArea, numberOfVisits, theme, numberOfTraveler,
		preferGuide, selfIntroduction, gatheringStatus, startDate,endDate FROM
		travelPlan_tb WHERE travelArea = #{travelArea} AND startDate =
		#{startDate} </select>

	<select id="retrieveTravelPlanByTravelAreaAndSpeakingAbility"
		parameterType="hashmap" resultType="TravelPlan"> SELECT travelPlanId, travelerId,
		speakingAbility, travelArea, numberOfVisits, theme, numberOfTraveler,
		preferGuide, selfIntroduction, gatheringStatus, startDate,endDate FROM
		travelPlan_tb WHERE travelArea = #{travelArea} AND speakingAbility =
		#{speakingAbility} </select>

	<select id="retrieveTravelPlanByTravelAreaAndSpeakingAbilityAndStartDate"
		parameterType="map" resultType="TravelPlan"> SELECT travelPlanId, travelerId,
		speakingAbility, travelArea, numberOfVisits, theme, numberOfTraveler,
		preferGuide, selfIntroduction, gatheringStatus, startDate,endDate FROM
		travelPlan_tb WHERE travelArea=#{travelArea} AND speakingAbility =
		#{speakingAbility} AND startDate = #{startDate} </select>

	<select id="retrieveTravelPlan" parameterType="String"
		resultType="travelPlan"> SELECT travelPlanId, travelerId, speakingAbility,
		travelArea, numberOfVisits, theme, numberOfTraveler, preferGuide,
		selfIntroduction, gatheringStatus, startDate,endDate FROM
		travelPlan_tb WHERE travelPlanId=#{travelPlanId} </select>

	<update id="updateTravelPlan" parameterType="String"> UPDATE
		travelPlan_tb SET theme =#{theme} WHERE travelPlanId=#{travelPlanId}
	</update>

	<delete id="deleteTravelPlan" parameterType="String"> DELETE FROM
		travelPlan_tb WHERE travelPlanId=#{travelPlanId} </delete>

</mapper>